# ELICE-PA

## 실행 방법

`npm install`

###

`npm run start`

## 주요 기능

- 키워드 입력에 따른 과목 검색
- 가격 필터 기능
- 과목 카드 페이지 구분

## src 폴더 구조

```bash
├── api
│   └── getCourseList.ts: 검색 필터 및 키워드에 맞는 과목 api 요청 함수
│
├── components
│   ├── CourseCards.tsx: 과목 카드 렌더링 및 페이지네이션 구현
│   │
│   └── SearchArea.tsx: 키워드 검색 및 필터 버튼 기능 구현
│
├── container
│   └── CourseContainer.tsx: 상태관리 설정 컴포넌트
│
├── types: 전역변수 및 타입 저장 파일
│
├── test -> 테스트에 필요한 변수 저장 파일
```

## 추가 사용 라이브러리

1. axios
2. lodash.debounce
3. react-router-dom v6
4. styled-components
5. antd-icons

## 상태관리

- 리액트의 useState를 사용하여 상태관리를 하였습니다.
- CourseContainer에서 선언하여 하위 컴포넌트에게 전달하는 방식으로 구현했습니다.

1. numCourse: 전체 과목의 수를 나타내며 페이지네이션에서 사용됩니다.
2. courses: 각 과목카드의 정보를 담고있어 카드 렌더링에 사용됩니다.
3. keyword: 상단 검색창의 입력상태를 나타냅니다. api호출에 사용됩니다.
4. priceList: 가격 필터 조건들을 담는 배열입니다. api호출에 사용됩니다.
5. offset: 현재 보고있는 페이지의 offset입니다. 페이지네이션 및 api호출에 사용됩니다.
6. filterList: 클릭된 필터들을 모아둔 배열입니다. 필터 버튼 클릭에 따른 스타일 변경에 사용됩니다.

## 쿼리 스트링

- react-router-dom의 useSearchParams를 이용하였습니다.
- 가격 필터를 클릭하면 price 파리미터를 추가 혹은 삭제하게 하였습니다.
- 키워드 입력 창의 값을 변경하면 keword 파라미터 값을 갱신하게 하였습니다. 입력창의 값이 없으면 파라미터를 삭제하도록 하였습니다.
- debounce 함수는 useCallback 훅을 이용하여 함수가 다시 생성되지 않도록 처리하였습니다.
- 가격 및 입력관련 상태 초기값을 쿼리스트링를 활용하여 선언해 새로고침해도 페이지가 유지되도록 하였습니다.

## 필터 버튼 로직

- 각 버튼의 클릭이벤트 함수를 만들면 함수가 많아지고 판단이 힘들어 각 버튼에 고유 Id를 부여하고 상위 컴포넌트에 클릭 이벤트 리스너 함수를 구현하였습니다.
- id를 통해 클릭된 버튼을 파악하고 filterList에서 해당 버튼이 있는지 확인하여 있다면 filterList에서 제외시키고 없다면 추가하여 클릭여부를 파악했습니다.
- 추가로 가격 관련 필터 버튼일 경우 priceList를 갱신하여 api 호출 하게끔 구현했습니다. 또한 쿼리스트링을 갱신하였습니다.

## 페이지네이션 로직

- 앞쪽 4개, 뒤쪽 4개를 표현하기 위해 [-4,-3,-2,-1,0,1,2,3,4]의 배열을 이용했습니다.
- 위 배열을 순회하며 값을 offset과 더하여 1이상 마지막 offset 이하인 경우만 버튼을 렌더링 하였습니다.
- 페이지들의 상위 컴포넌트에 클릭이벤트 리스너 함수를 선언하여 버튼 클릭에 따른 offset 변경을 처리했습니다.
- 양쪽 화살표는 클릭시 offset을 증감하게 처리했습니다. 맨 처음이거나 마지막 일때는 제외했습니다.
- 필터 버튼 클릭 또는 키워드 입력시 offset을 맨 처음으로 변경하여 검색 결과를 볼 수 있게 구현하였습니다.

## 테스트 코드

- 첫 화면 로딩 후 필터 버튼의 개수, 카드 개수, 페이지 버튼 개수를 확인하였습니다.
- 서버에서 받은 전체 과목개수가 정상적으로 표시되는지 확인하였습니다.
- 가격 필터 버튼("무료") 를 클릭하였을때 쿼리스트링에 저장되며 서버의 응답을 화면에 반영하는지를 확인하였습니다.
- 검색 창에 키워드 입력 시 쿼리스트링에 정상적으로 저장되는지 서버의 응답을 화면에 반영하는지를 확인하였습니다.
- 오른쪽 화살표 클릭 시 페이지 표시가 정상적으로 바뀌는지 확인하였습니다.
- 다만, 이전 테스트에서 입력한 쿼리 스트링이 남아있어 request가 정상적으로 이루어지지 않았습니다.
- 현재 테스트 코드는 이전 테스트에서 사용한 쿼리스트링을 반영하여 mock을 설정하였습니다.
